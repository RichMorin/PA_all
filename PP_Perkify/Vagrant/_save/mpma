:
# mpma - make perk_make attempt
#
# Written by Rich Morin, CFCL, 2019

# set -x  #!T

  # Check where we are...

  pm='/Local/Users/rdm/perk_make'

  if [ $PWD != $pm ]; then    #!K - shouldn't need this...
    echo "Must be run from directory '$pm'."
    exit
  fi

  # Deal with a few preliminary tasks:

  vagrant destroy -f              # kill off any existing VM
  rm -rf .vagrant *               # remove file detritus

  # Load the Vagrantfile (etc) for Ubuntu 19.04: 
  #   https://app.vagrantup.com/bento/boxes/ubuntu-19.04

  vagrant init bento/ubuntu-19.04 --box-version 201906.18.0

  # Update the working directory; set up Vagrantfiles.

  base=../_Work/P_Elixir/PA_hax/PA_all/PP_Perkify/Vagrant/_base   #!K

  (cd $base/make; pkg_list.rb)    # generate pkg_tbl.md

  cp  -R $base/* .
  mv  Vagrantfile Vagrantfile.orig

  for ext in dist make test; do
    cat make/Vagrantfile.$ext make/vf_common.rb > Vagrantfile.$ext
  done
  cp  Vagrantfile.make Vagrantfile

  vagrant up --provision          # Bring up a provisioned VM.
